{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/Users/longjiuwei/html,css,js/xiaogao_blog/web/pages/subscribe.tsx\",\n    _this = this,\n    _s = $RefreshSig$();\n\nimport React, { useState } from 'react';\nimport Helmet from '../components/Helmet';\nimport Texty from 'rc-texty';\nimport 'rc-texty/assets/index.css';\nimport Styles from '../styles/subscribe/index.module.scss';\nimport { headerType } from '../types/response';\nimport { Email } from '../util/RegExp';\nimport PageHeader from '../components/Header';\nimport Wave from '../components/wave';\nimport { subscribe_email } from '../api/api';\nimport { message } from 'antd';\n\nvar Subscribe = function Subscribe() {\n  _s();\n\n  var _useState = useState(''),\n      email = _useState[0],\n      setUserEmail = _useState[1];\n\n  var _useState2 = useState(''),\n      warnTextTow = _useState2[0],\n      setWarnTextTow = _useState2[1];\n\n  var _useState3 = useState(''),\n      warnTextNo = _useState3[0],\n      setWarnTextNo = _useState3[1];\n\n  var userChange = function userChange(e) {\n    setUserEmail(e.target.value);\n  };\n\n  var subscribe = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var _yield$subscribe_emai, data, success;\n\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              if (!(email.trim() === '')) {\n                _context.next = 3;\n                break;\n              }\n\n              setWarnTextNo('');\n              return _context.abrupt(\"return\", setWarnTextTow('填写邮箱地址!'));\n\n            case 3:\n              if (Email.test(email)) {\n                _context.next = 6;\n                break;\n              }\n\n              setWarnTextTow('');\n              return _context.abrupt(\"return\", setWarnTextNo('请输入正确的邮箱地址!'));\n\n            case 6:\n              setWarnTextTow('');\n              setWarnTextNo('');\n              _context.next = 10;\n              return subscribe_email({\n                type: 1,\n                email: email\n              });\n\n            case 10:\n              _yield$subscribe_emai = _context.sent;\n              data = _yield$subscribe_emai.data;\n              success = _yield$subscribe_emai.success;\n              if (!success) message.warn(data);\n              message.success(data);\n              setUserEmail('');\n\n            case 16:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function subscribe() {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: Styles.content,\n    children: [/*#__PURE__*/_jsxDEV(Helmet, {\n      title: \"subscribe| \\u5C0F\\u818F\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 9\n    }, _this), /*#__PURE__*/_jsxDEV(PageHeader, {\n      type: headerType.subscribe\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 9\n    }, _this), /*#__PURE__*/_jsxDEV(\"h1\", {\n      className: Styles.h1,\n      children: \"[ \\u6B7B\\u4EA1\\u5982\\u98CE-\\u5E38\\u4F34\\u65E0\\u58F0 ]\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 9\n    }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: Styles.beginBox,\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"\\u563F\\uFF0C\\u4F60\\u4ECA\\u5929\\u7B11\\u4E86\\u4E48 ~~\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 13\n      }, _this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"\\u613F\\u4F60\\u96E8\\u5929\\u6709\\u4F1E\\uFF0C\\u6DF1\\u591C\\u6709\\u706F\\uFF0C\\u4E00\\u751F\\u6E29\\u6696\\u7EAF\\u826F\\uFF0C\\u4E0D\\u820D\\u7231\\u4E0E\\u81EA\\u7531\\u3002 \\u4E0E\\u5C18\\u4E16\\u7684\\u4E07\\u5343\\u7F8E\\u597D\\u90FD\\u80FD\\u4E0D\\u671F\\u800C\\u9047\\u3002 \\u6B22\\u8FCE\\u8BA2\\u9605\\u5FC3\\u60C5\\u5C0F\\u9547\\u7684\\u65B0\\u6587\\u7AE0\\u901A\\u77E5\\uFF0C\\u613F\\u597D~~\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 13\n      }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: Styles.inputBox,\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          placeholder: \"Your email address\",\n          value: email,\n          onChange: userChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 17\n        }, _this), /*#__PURE__*/_jsxDEV(Texty, {\n          className: Styles.warnText,\n          children: warnTextTow\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 17\n        }, _this), /*#__PURE__*/_jsxDEV(Texty, {\n          className: Styles.warnText,\n          children: warnTextNo\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 17\n        }, _this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: subscribe,\n          children: \"subscribe\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 17\n        }, _this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 13\n      }, _this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 9\n    }, _this), /*#__PURE__*/_jsxDEV(Wave, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 9\n    }, _this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 52,\n    columnNumber: 12\n  }, _this);\n};\n\n_s(Subscribe, \"I0YQFfLGvr+hb/YLKDdmy44gwYw=\");\n\n_c = Subscribe;\nexport default Subscribe;\n\nvar _c;\n\n$RefreshReg$(_c, \"Subscribe\");","map":{"version":3,"sources":["/Users/longjiuwei/html,css,js/xiaogao_blog/web/pages/subscribe.tsx"],"names":["React","useState","Helmet","Texty","Styles","headerType","Email","PageHeader","Wave","subscribe_email","message","Subscribe","email","setUserEmail","warnTextTow","setWarnTextTow","warnTextNo","setWarnTextNo","userChange","e","target","value","subscribe","trim","test","type","data","success","warn","content","h1","beginBox","inputBox","warnText"],"mappings":"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","sourcesContent":["import React, { useState } from 'react'\nimport Helmet from '../components/Helmet'\nimport Texty from 'rc-texty';\nimport 'rc-texty/assets/index.css';\n\nimport Styles from '../styles/subscribe/index.module.scss'\n\nimport { headerType } from '../types/response'\nimport { Email } from '../util/RegExp'\n\nimport PageHeader from '../components/Header'\nimport Wave from '../components/wave'\n\nimport { subscribe_email } from '../api/api'\nimport { message } from 'antd';\n\n\n\nconst Subscribe: React.FC = () => {\n\n    const [email, setUserEmail] = useState<string>('')\n    const [warnTextTow, setWarnTextTow] = useState<string>('')\n    const [warnTextNo, setWarnTextNo] = useState<string>('')\n\n    const userChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n\n        setUserEmail(e.target.value)\n\n    }\n\n    const subscribe = async () => {\n\n        if (email.trim() === '') {\n            setWarnTextNo('')\n            return setWarnTextTow('填写邮箱地址!')\n        }\n        if (!Email.test(email)) {\n            setWarnTextTow('')\n            return setWarnTextNo('请输入正确的邮箱地址!')\n        }\n        setWarnTextTow('')\n        setWarnTextNo('')\n\n        const { data, success } = await subscribe_email({ type: 1, email: email })\n\n        if (!success) message.warn(data)\n\n        message.success(data)\n        setUserEmail('')\n\n    }\n    return <div className={Styles.content}>\n\n        <Helmet title=\"subscribe| 小膏\" />\n\n        <PageHeader type={headerType.subscribe} />\n\n        <h1 className={Styles.h1}>[ 死亡如风-常伴无声 ]</h1>\n\n        <div className={Styles.beginBox}>\n\n            <h1>嘿，你今天笑了么 ~~</h1>\n            <p>\n                愿你雨天有伞，深夜有灯，一生温暖纯良，不舍爱与自由。\n                与尘世的万千美好都能不期而遇。\n                欢迎订阅心情小镇的新文章通知，愿好~~\n                        </p>\n            <div className={Styles.inputBox}>\n\n                <input type=\"text\" placeholder=\"Your email address\" value={email} onChange={userChange} />\n                <Texty className={Styles.warnText}>{warnTextTow}</Texty>\n                <Texty className={Styles.warnText}>{warnTextNo}</Texty>\n                <button onClick={subscribe}>subscribe</button>\n\n            </div>\n        </div>\n        <Wave />\n    </div>\n}\nexport default Subscribe"]},"metadata":{},"sourceType":"module"}