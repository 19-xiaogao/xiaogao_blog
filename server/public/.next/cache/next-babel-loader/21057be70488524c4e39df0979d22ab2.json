{"ast":null,"code":"import { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport React, { useState } from 'react';\nimport { useRouter } from 'next/router';\nimport Texty from 'rc-texty';\nimport 'rc-texty/assets/index.css';\nimport Styles from '../styles/validationCss/index.module.scss';\nimport { subscribe_verify } from '../api/api';\nimport Helmet from './components/Helmet';\nimport { message } from 'antd';\n\nconst Validation = () => {\n  const router = useRouter();\n  const {\n    0: verifyCode,\n    1: setVerifyCode\n  } = useState('');\n  const {\n    0: warnMessage,\n    1: setWarnMessage\n  } = useState('');\n\n  const onVerifyCodeChange = e => {\n    setVerifyCode(e.target.value);\n  };\n\n  const urlParams = () => {\n    const location = window.location.href;\n    const params = location.split('?')[1].split('&');\n    return {\n      email: params[0].split('=')[1],\n      id: params[1].split('=')[1]\n    };\n  };\n\n  const submitVerify = async () => {\n    if (verifyCode.trim().length !== 6) {\n      return setWarnMessage('请输入6位数');\n    }\n\n    const {\n      email,\n      id\n    } = urlParams();\n    const {\n      success\n    } = await subscribe_verify({\n      VerificationCode: verifyCode,\n      email,\n      id\n    });\n    if (!success) return message.error('验证邮箱失败');\n    message.success(\"验证邮箱成功\");\n    setVerifyCode('');\n    router.push('/');\n  };\n\n  return /*#__PURE__*/_jsxs(\"div\", {\n    className: Styles.bigBox,\n    children: [/*#__PURE__*/_jsx(Helmet, {\n      title: \"\\u9A8C\\u8BC1 | \\u5C0F\\u818F\"\n    }), /*#__PURE__*/_jsxs(\"div\", {\n      className: Styles.validation,\n      children: [/*#__PURE__*/_jsx(\"h2\", {\n        children: \"\\u8BA2\\u9605\\u90AE\\u7BB1\\u9A8C\\u8BC1\"\n      }), /*#__PURE__*/_jsxs(\"div\", {\n        className: Styles.entryBox,\n        children: [/*#__PURE__*/_jsx(\"input\", {\n          type: \"text\",\n          placeholder: \"\\u8F93\\u5165\\u9A8C\\u8BC1\\u7801\",\n          onChange: onVerifyCodeChange\n        }), /*#__PURE__*/_jsx(\"button\", {\n          onClick: submitVerify,\n          children: \"\\u63D0\\u4EA4\"\n        })]\n      }), /*#__PURE__*/_jsx(Texty, {\n        className: Styles.rules,\n        children: warnMessage\n      })]\n    })]\n  });\n};\n\nexport default Validation;","map":null,"metadata":{},"sourceType":"module"}